{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from 'flatpickr';\n// Додатковий імпорт стилів\nimport 'flatpickr/dist/flatpickr.min.css';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputTimer = document.querySelector('#datetime-picker');\nconst buttonTimer = document.querySelector('button[data-start]');\nconst days = document.querySelector('span[data-days]');\nconst hours = document.querySelector('span[data-hours]');\nconst minutes = document.querySelector('span[data-minutes]');\nconst seconds = document.querySelector('span[data-seconds]');\n\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: Date.now(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    if (userSelectedDate < options.defaultDate) {\n      buttonTimer.setAttribute('disabled', '');\n      buttonTimer.setAttribute(\n        'style',\n        'background-color: #CFCFCF; color: #989898;'\n      );\n\n      iziToast.error({\n        message: 'Please choose a date in the future',\n      });\n    } else {\n      buttonTimer.removeAttribute('disabled');\n      buttonTimer.removeAttribute('style');\n      buttonTimer.addEventListener('click', activeTimer);\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nfunction activeTimer() {\n  inputTimer.setAttribute('disabled', '');\n  buttonTimer.setAttribute('disabled', '');\n  buttonTimer.setAttribute(\n    'style',\n    'background-color: #CFCFCF; color: #989898;'\n  );\n  let diffTime = userSelectedDate - options.defaultDate;\n  const secondInterval = setInterval(() => {\n    if (diffTime > 0) {\n      let newTimer = convertMs(diffTime);\n\n      days.textContent = `${addZero(newTimer.days)}`;\n      hours.textContent = `${addZero(newTimer.hours)}`;\n      minutes.textContent = `${addZero(newTimer.minutes)}`;\n      seconds.textContent = `${addZero(newTimer.seconds)}`;\n\n      diffTime -= 1000;\n    } else {\n      clearInterval(secondInterval);\n    }\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addZero(num) {\n  return num.toString().padStart(2, '0');\n}\n"],"names":["inputTimer","buttonTimer","days","hours","minutes","seconds","userSelectedDate","options","selectedDates","iziToast","activeTimer","flatpickr","diffTime","secondInterval","newTimer","convertMs","addZero","ms","num"],"mappings":"+IAUA,MAAMA,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EAE3D,IAAIC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,KAAK,IAAK,EACvB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,GAC7BF,EAAmBC,EAAQ,aAC7BN,EAAY,aAAa,WAAY,EAAE,EACvCA,EAAY,aACV,QACA,4CACR,EAEMQ,EAAS,MAAM,CACb,QAAS,oCACjB,CAAO,IAEDR,EAAY,gBAAgB,UAAU,EACtCA,EAAY,gBAAgB,OAAO,EACnCA,EAAY,iBAAiB,QAASS,CAAW,EAEpD,CACH,EAEAC,EAAU,mBAAoBJ,CAAO,EAErC,SAASG,GAAc,CACrBV,EAAW,aAAa,WAAY,EAAE,EACtCC,EAAY,aAAa,WAAY,EAAE,EACvCA,EAAY,aACV,QACA,4CACJ,EACE,IAAIW,EAAWN,EAAmBC,EAAQ,YAC1C,MAAMM,EAAiB,YAAY,IAAM,CACvC,GAAID,EAAW,EAAG,CAChB,IAAIE,EAAWC,EAAUH,CAAQ,EAEjCV,EAAK,YAAc,GAAGc,EAAQF,EAAS,IAAI,IAC3CX,EAAM,YAAc,GAAGa,EAAQF,EAAS,KAAK,IAC7CV,EAAQ,YAAc,GAAGY,EAAQF,EAAS,OAAO,IACjDT,EAAQ,YAAc,GAAGW,EAAQF,EAAS,OAAO,IAEjDF,GAAY,GAClB,MACM,cAAcC,CAAc,CAE/B,EAAE,GAAI,CACT,CAEA,SAASE,EAAUE,EAAI,CAQrB,MAAMf,EAAO,KAAK,MAAMe,EAAK,KAAG,EAE1Bd,EAAQ,KAAK,MAAOc,EAAK,MAAO,IAAI,EAEpCb,EAAU,KAAK,MAAQa,EAAK,MAAO,KAAQ,GAAM,EAEjDZ,EAAU,KAAK,MAASY,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAf,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASW,EAAQE,EAAK,CACpB,OAAOA,EAAI,SAAU,EAAC,SAAS,EAAG,GAAG,CACvC"}